<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Perfil</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="src/bootstrap/css/bootstrap.css">
        <style>
            #autocompletar{
                z-index: 2;
            }
            #tel{
                margin-right:16px;	
            }
            .btn span.glyphicon {    			
                opacity: 0;				
            }
            .btn.active span.glyphicon {				
                opacity: 1;				
            }
            .table {
                width: 10%;
                margin-bottom: 10px;
            }
            table,thead,tr,tbody,th,td {
                text-align: center;
            }
        </style>
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="src/jquery/jquery-ui-1.11.2/jquery-ui.css">
        <script src="src/jquery/jquery.min.js"></script>
        <script src="src/jquery/jquery-ui-1.11.2/jquery-ui.js"></script>
        <script src="sql/jsSearch.js"></script>
    </head>
    <body>
        <script>
            window.onload = function () {
                //alert("dd");
                var ca = document.cookie.split('=');
                //var select = select_query("SELECT * FROM usuario WHERE usuario ='" + ca[0] + "' AND contrasena ='" + ca[1] + "' AND estado='t' AND sistemas='t';");
                try {
                    var select = search("preproduccion:ValidateUser", ca[0], ca[1], 't');
                } catch (err) {
                }
                if (select === undefined) {
                    //alert("ad");
                    location.href = "barranquilla.html";
                }
            };
        </script>
        <ul class="nav nav-tabs">
            <li class="active"><a href="#crear" data-toggle="tab">Crear Usuario</a></li>
            <li><a href="#modificacion" data-toggle="tab">Modificación de Usuarios</a></li>
            <a href="barranquilla.html"><img src="imagenes/limpiar.png" align="right" title="Salir" style="height: 30px;"></a>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade in active" id="crear">
                <div class="col-xs-12"><h2>Creación de Usuario</h2></div>
                <br /><br />
                <form class="form-horizontal" method="post" action="" onsubmit="guardar()">
                    <!--<div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Nombre de Usuario</label>
                        <div class="col-sm-2">
                            <input class="form-control" type="text" id="formGroup" value="Roberto" disabled>input no editable
                        </div>
                    </div>-->
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Nombres y Apellidos</label>
                        <div class="col-sm-4">
                            <input class="form-control" type="text" id="nombre" required="required">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Cargo</label>
                        <div class="col-sm-2">
                            <input class="form-control" type="text" id="cargo">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Correo electrónico</label>
                        <div class="input-group col-sm-2">
                            <span class="input-group-addon">@</span>
                            <input class="form-control" type="email" id="email" required="required">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Dependencia</label>
                        <div class="col-sm-2">
                            <select class="form-control" id="dependencia">
                                <option>Planeación</option>
                                <option>Catastro</option>
                                <option>Hacienda</option>
                                <option>GESSTOR</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Fecha de expiración</label>
                        <div class="col-sm-2">
                            <input class="form-control" type="date" id="fecha" required="required">
                        </div>
                    </div>
                    <!--<div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Información biográfica</label>
                        <div class="col-sm-4">
                            <textarea class="form-control" rows="4"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Estado</label>
                        <div class="col-sm-4">
                            <select class="form-control">
                                <option>En línea</option>
                                <option>Ocupado</option>
                                <option>Ausente</option>
                                <option>Desconectado</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Alias</label>
                        <div class="col-sm-4">
                            <input class="form-control" type="text" id="formGroup">
                            <span class="help-block">Este nombre sera mostrado a los usuarios, ocultando el verdadero nombre.</span>
                        </div>
                    </div>-->
                    <!--
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Cuenta</label>
                        <div class="col-sm-4">
                            <label class="radio-inline">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked> Activar
                            </label>
                            <label class="radio-inline">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> Desactivar
                            </label>
                        </div>
                    </div>-->
                    <div class="col-xs-12"><h2>Permisos</h2></div>
                    <div class="table-responsive">
                        <table class="table table-hover table-bordered">
                            <tr>
                                <th colspan="2">GESTION CATASTRAL</th>
                                <th colspan="4">PLANEACION</th>
                                <th colspan="2">HACIENDA</th>
                                <th rowspan="2">SISTEMAS</th>
                                <th rowspan="2">GESSTOR</th>
                            </tr>
                            <tr>
                                <th>MISIONAL</th>
                                <th>CONSULTA</th>
                                <th>MISIONAL</th>
                                <th>CONSULTA</th>
                                <th>SUI</th>
                                <th>POT INTERACTIVO</th>
                                <th>MISIONAL</th>
                                <th>CONSULTA</th>
                            </tr>
                            <tbody>
                                <!-- Aplicadas en las filas -->
                                <tr class="active">
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="catastro" class="btn btn-primary">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="catastroConsul" class="btn btn-success">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="planeacion" class="btn btn-primary">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="planeacionConsul" class="btn btn-success">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="sui" class="btn btn-warning">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="pot" class="btn btn-danger">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="hacienda" class="btn btn-primary">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="haciendaConsul" class="btn btn-success">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="sistemas" class="btn btn-warning">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" data-toggle="buttons">
                                            <label id="gestor" class="btn btn-danger">
                                                <input type="checkbox" autocomplete="off">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </label>
                                        </div>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <label class="col-sm-2 control-label" for="formGroup"></label>
                    <div class="col-sm-4">
                        <button type="submit" class="btn btn-success btn-lg"><span class="glyphicon glyphicon-floppy-saved"></span> Guardar</button>
                        <!--<button type="button" class="btn btn-danger btn-lg"><span class="glyphicon glyphicon-remove-circle"></span> Cancelar</button>-->
                        <!--<button type="submit" class="btn btn-primary btn-block btn-large" onclick="setCookie()">Ingresar</button>-->
                    </div>
                </form>
                <img src="./imagenes/organigrama.png" style="position: absolute;right: 1em;top: 3em; width: 48em">
            </div>
            <div class="tab-pane fade" id="modificacion">
                <div class="col-xs-12"><h2>Modificación de Usuario</h2></div>
                <br /><br />
                <form class="form-horizontal" method="post" onsubmit="actualizar()">
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="formGroup">Usuario</label>
                        <div class="col-sm-2">
                            <input class="form-control" type="text" id="usu" autocomplete="off">
                        </div>
                    </div>
                    <div id="group" hidden="hidden">
                        <!--<div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup">Nombres y Apellidos</label>
                            <div class="col-sm-4">
                                <input class="form-control" type="text" id="e_nombre1">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup">Dirección</label>
                            <div class="col-sm-4">
                                <input class="form-control" type="text" id="e_apellido1">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup" id="tel">Teléfono</label>
                            <div class="input-group col-sm-3">
                                <span class="input-group-addon"><span class="glyphicon glyphicon-phone"></span></span>
                                <input class="form-control" type="text" id="e_apellido2">
                            </div>
                        </div>-->
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup">Cargo</label>
                            <div class="col-sm-2">
                                <input class="form-control" type="text" id="e_cargo">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup" id="tel">Correo electrónico</label>
                            <div class="input-group col-sm-3">
                                <span class="input-group-addon">@</span>
                                <input class="form-control" type="text" id="e_email">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup">Dependencia</label>
                            <div class="col-sm-2">
                                <select class="form-control" id="e_dependencia">
                                    <option>Planeación</option>
                                    <option>Catastro</option>
                                    <option>Hacienda</option>
                                    <option>GESSTOR</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup">Fecha de expiración</label>
                            <div class="col-sm-2">
                                <input class="form-control" type="date" id="e_fecha" required="required">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="formGroup">Cuenta</label>
                            <div class="col-sm-4">
                                <label class="radio-inline">
                                    <input type="radio" name="inlineRadioOptions" id="rad1" value="activar"> Activar
                                    <!--<input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked> Activar-->
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="inlineRadioOptions" id="rad2" value="desactivar"> Desactivar
                                </label>
                            </div>
                        </div>
                        <div class="col-xs-12"><h2>Permisos</h2></div>
                        <div class="table-responsive">
                            <table class="table table-hover table-bordered">
                                <tr>
                                    <th colspan="2">GESTION CATASTRAL</th>
                                    <th colspan="4">PLANEACION</th>
                                    <th colspan="2">HACIENDA</th>
                                    <th rowspan="2">SISTEMAS</th>
                                    <th rowspan="2">GESSTOR</th>
                                </tr>
                                <tr>
                                    <th>MISIONAL</th>
                                    <th>CONSULTA</th>
                                    <th>MISIONAL</th>
                                    <th>CONSULTA</th>
                                    <th>SUI</th>
                                    <th>POT INTERACTIVO</th>
                                    <th>MISIONAL</th>
                                    <th>CONSULTA</th>
                                </tr>
                                <tbody>
                                    <!-- Aplicadas en las filas -->
                                    <tr class="active">
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="catastroE" class="btn btn-primary">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="catastroConsulE" class="btn btn-success">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="planeacionE" class="btn btn-primary">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="planeacionConsulE" class="btn btn-success">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="suiE" class="btn btn-warning">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="potE" class="btn btn-danger">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="haciendaE" class="btn btn-primary">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="haciendaConsulE" class="btn btn-success">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>

                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="sistemasE" class="btn btn-warning">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" data-toggle="buttons">
                                                <label id="gestorE" class="btn btn-danger">
                                                    <input type="checkbox" autocomplete="off">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </label>
                                            </div>
                                        </td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <label class="col-sm-2 control-label" for="formGroup"></label>
                    <div id="button" hidden="hidden" class="col-sm-4">
                        <button type="submit" class="btn btn-success btn-lg"><span class="glyphicon glyphicon-floppy-saved"></span> Guardar</button>
                        <!--<button type="button" class="btn btn-danger btn-lg"><span class="glyphicon glyphicon-remove-circle"></span> Cancelar</button>-->
                    </div>
                </form>
                <img src="./imagenes/organigrama.png" style="position: absolute;right: 1em;top: 3em; width: 48em">
            </div>
        </div>
        <!--<div class="form-group">
            <label class="col-sm-2 control-label" for="formGroup">Mostrar Información</label>
            <div class="col-sm-4">
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox1" value="option1" checked disabled> Nombre
                </label>
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox2" value="option2"> Biografía
                </label>
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox3" value="option3"> Teléfono
                </label>
            </div>
        </div>-->
        <script>
            $("#usu").autocomplete({
                minLength: 1,
                source: Sourceuser,
                select: SelectUser
            });
            function Sourceuser(requestString, responseFunc) {
                var querystr = requestString.term.replace(/[^0-9a-zA-Z ]/g, "");
                if (querystr.length === 0) {
                    response([]);
                    return;
                }
                var viewParamsStr = viewparamsToStr({
                    query: querystr
                });
                var wfsParams = {
                    service: 'WFS',
                    version: '2.0.0',
                    request: 'GetFeature',
                    typeName: 'preproduccion:BuscarUsuario',
                    outputFormat: 'application/json',
                    srsname: 'EPSG:3857',
                    viewparams: viewParamsStr
                };
                $.ajax({
                    url: url,
                    data: wfsParams,
                    type: "GET",
                    dataType: "json",
                    success: function (data, status, xhr) {
                        //console.log(data);
                        var arr = [];
                        for (i = 0; i < data.features.length; i++) {
                            //arr[i] = data.features[i].properties.usuario;
                            arr.push({
                                //codigo: data.features[i].properties.codigo,
                                value: data.features[i].properties.usuario,
                                //feature: data,
                                cargo: data.features[i].properties.cargo,
                                catastroc: data.features[i].properties.catastroc,
                                catastrom: data.features[i].properties.catastrom,
                                dependenci: data.features[i].properties.dependenci,
                                email: data.features[i].properties.email,
                                estado: data.features[i].properties.estado,
                                fechaexp: data.features[i].properties.fechaexp,
                                gestor: data.features[i].properties.gestor,
                                haciendac: data.features[i].properties.haciendac,
                                haciendam: data.features[i].properties.haciendam,
                                nombre: data.features[i].properties.nombre,
                                planeacionc: data.features[i].properties.planeacionc,
                                planeacionm: data.features[i].properties.planeacionm,
                                pot: data.features[i].properties.pot,
                                sistemas: data.features[i].properties.sistemas,
                                sui: data.features[i].properties.sui,
                                id: data.features[i].properties.id
                                        //usuario: data.features[i].properties.usuario
                                        //direccion: data.features[i].properties.direccion
                            });
                        }
                        if (arr.length !== 0) {
                            responseFunc(arr);
                        } else {
                            arr[0] = "No se encuentra informacion asociada a la consulta";
                            responseFunc(arr);
                        }
                    },
                    error: function (jqXHR, exception) {
                        console.log(jqXHR);
                        console.log(exception);
                    }
                });
            }
            function SelectUser(event, ui) {
                //console.log(ui.item);
                //console.log(Object.keys(ui.item));
                var select = [];
                select[0] = [];
                for (j = 0; j < Object.keys(ui.item).length; j++) {
                    var a = Object.keys(ui.item)[j];
                    select[0][j] = ui.item[a];
                }
                //console.log(select);
                userid = select[0][17];
                document.getElementById('usu').disabled = true;
                document.getElementById('group').style.display = 'block';
                document.getElementById('button').style.display = 'block';
                //document.getElementById('e_nombre1').value = select["0"][0];
                //document.getElementById('e_apellido1').value = select["0"][2];
                //document.getElementById('e_apellido2').value = select["0"][3];
                document.getElementById('e_cargo').value = select[0][1];
                document.getElementById('e_email').value = select[0][5];
                document.getElementById('e_fecha').value = select[0][7].substring(0, 10);
                if (select[0][4] === "Planeación") {
                    document.getElementById("e_dependencia").value = "Planeación";
                } else if (select[0][4] === "Catastro") {
                    document.getElementById("e_dependencia").value = "Catastro";
                } else if (select[0][4] === "Hacienda") {
                    document.getElementById("e_dependencia").value = "Hacienda";
                } else if (select[0][4] === "GESSTOR") {
                    document.getElementById("e_dependencia").value = "GESSTOR";
                }
                if (select[0][6] === true) {
                    document.getElementById("rad1").checked = true;
                } else {
                    document.getElementById("rad2").checked = true;
                }
                if (select[0][3] === true) {
                    document.getElementById("catastroE").className = "btn btn-primary active";
                } else {
                    document.getElementById("catastroE").className = "btn btn-primary";
                }
                if (select[0][2] === true) {
                    document.getElementById("catastroConsulE").className = "btn btn-success active";
                } else {
                    document.getElementById("catastroConsulE").className = "btn btn-success";
                }
                if (select[0][16] === true) {
                    document.getElementById("suiE").className = "btn btn-warning active";
                } else {
                    document.getElementById("suiE").className = "btn btn-warning";
                }
                if (select[0][14] === true) {
                    document.getElementById("potE").className = "btn btn-danger active";
                } else {
                    document.getElementById("potE").className = "btn btn-danger";
                }
                if (select[0][13] === true) {
                    document.getElementById("planeacionE").className = "btn btn-primary active";
                } else {
                    document.getElementById("planeacionE").className = "btn btn-primary";
                }
                if (select[0][10] === true) {
                    document.getElementById("haciendaE").className = "btn btn-primary active";
                } else {
                    document.getElementById("haciendaE").className = "btn btn-primary";
                }
                if (select[0][15] === true) {
                    document.getElementById("sistemasE").className = "btn btn-warning active";
                } else {
                    document.getElementById("sistemasE").className = "btn btn-warning";
                }
                if (select[0][8] === true) {
                    document.getElementById("gestorE").className = "btn btn-danger active";
                } else {
                    document.getElementById("gestorE").className = "btn btn-danger";
                }
                if (select[0][12] === true) {
                    document.getElementById("planeacionConsulE").className = "btn btn-success active";
                } else {
                    document.getElementById("planeacionConsulE").className = "btn btn-success";
                }
                if (select[0][9] === true) {
                    document.getElementById("haciendaConsulE").className = "btn btn-success active";
                } else {
                    document.getElementById("haciendaConsulE").className = "btn btn-success";
                }
            }
            function actualizar() {
                //var nom = document.getElementById('nombre1').value.split(' ');
                //var nomg = nom[0] + "." + nom[nom.length - 1];
                //console.log(nomg + "2017");
                //var contrasena = hex_md5(nomg + "2017");
                if (document.getElementById('catastroE').className === 'btn btn-primary') {
                    var catastroE = false;
                } else {
                    var catastroE = true;
                }
                if (document.getElementById('catastroConsulE').className === 'btn btn-success') {
                    var catastroConsulE = false;
                } else {
                    var catastroConsulE = true;
                }
                if (document.getElementById('planeacionE').className === 'btn btn-primary') {
                    var planeacionE = false;
                } else {
                    var planeacionE = true;
                }
                if (document.getElementById('planeacionConsulE').className === 'btn btn-success') {
                    var planeacionConsulE = false;
                } else {
                    var planeacionConsulE = true;
                }
                if (document.getElementById('suiE').className === 'btn btn-warning') {
                    var suiE = false;
                } else {
                    var suiE = true;
                }
                if (document.getElementById('potE').className === 'btn btn-danger') {
                    var potE = false;
                } else {
                    var potE = true;
                }
                if (document.getElementById('haciendaE').className === 'btn btn-primary') {
                    var haciendaE = false;
                } else {
                    var haciendaE = true;
                }
                if (document.getElementById('haciendaConsulE').className === 'btn btn-success') {
                    var haciendaConsulE = false;
                } else {
                    var haciendaConsulE = true;
                }
                if (document.getElementById('sistemasE').className === 'btn btn-warning') {
                    var sistemasE = false;
                } else {
                    var sistemasE = true;
                }
                if (document.getElementById('gestorE').className === 'btn btn-danger') {
                    var gestorE = false;
                } else {
                    var gestorE = true;
                }
                /*console.log("catastro"+catastro);
                 console.log("catastroConsul"+catastroConsul);
                 console.log("hacienda"+hacienda);
                 console.log("haciendaadm"+haciendaadm);
                 console.log("planeacion"+planeacion);
                 console.log("planeacionadm"+planeacionadm);
                 console.log("tecnologia"+tecnologia);
                 console.log("gestor"+gestor);
                 console.log(document.getElementById('inlineRadio1').checked);*/
                //var cargo = document.getElementById('e_cargo').value;
                //var arrayResult = update_query("UPDATE usuario SET cargo='" + document.getElementById('e_cargo').value + "',email='" + document.getElementById('e_email').value + "', catastrom='" + catastroE + "', catastroc='" + catastroConsulE + "', sui='" + suiE + "', pot='" + potE + "', planeacionm='" + planeacionE + "', haciendam='" + haciendaE + "', sistemas='" + sistemasE + "', gestor='" + gestorE + "', planeacionc='" + planeacionConsulE + "', haciendac='" + haciendaConsulE + "', estado='" + document.getElementById('rad1').checked + "', dependenci='" + document.getElementById('e_dependencia').value + "', fechaexp='" + document.getElementById('e_fecha').value + "' WHERE usuario='" + document.getElementById('usu').value + "';");
                var postData = '<Transaction service="WFS" xmlns="http://www.opengis.net/wfs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs http://35.184.3.4:8080/geoserver/schemas/wfs/1.1.0/wfs.xsd">\
                    <Update typeName="user:usuario">\
                        <Property>\
                            <Name>cargo</Name>\
                            <Value>' + document.getElementById('e_cargo').value + '</Value>\
                        </Property>\
                        <Filter>\
                            <FeatureId fid="usuario.' + userid + '"/>\
                        </Filter>\
                    </Update>\
                </Transaction>';
                rooturl = 'http://35.184.3.4:8080/geoserver/user/ows?';
                $.ajax({
                    type: "POST",
                    url: rooturl,
                    dataType: "xml",
                    contentType: "text/xml",
                    data: postData,
                    success: function (xml) {
                        console.log(xml);
                        //alert('success');
                    },
                    error: function (xml) {
                        console.log('error');
                    }
                });
                //var arrayResult = update_query("INSERT INTO usuario (nombre1,nombre2,apellido1,apellido2,email,usuario,contrasena,catastro,catastro_adm,hacienda,hacienda_adm,planeacion,planeacion_adm,tecnologia,gestor,estado) VALUES('" + document.getElementById('nombre1').value + "','" + document.getElementById('nombre2').value + "','" + document.getElementById('apellido1').value + "','" + document.getElementById('apellido2').value + "','" + document.getElementById('email').value + "','" + nomg + "','" + contrasena + "','" + catastro + "','" + catastroConsul + "','" + hacienda + "','" + haciendaadm + "','" + planeacion + "','" + planeacionadm + "','" + tecnologia + "','" + gestor + "','" + document.getElementById('inlineRadio1').checked + "');");
                //console.log(arrayResult);
                //var arrayResult = update_query("UPDATE u_terreno SET simbol='0';UPDATE u_terreno SET simbol = '100' WHERE area<100;UPDATE u_terreno SET simbol = '100-1.000' WHERE area BETWEEN 100 AND 1000;UPDATE u_terreno SET simbol = '1.000-10.000' WHERE area BETWEEN 1000 AND 10000;UPDATE u_terreno SET simbol = '10.000' WHERE area > 10000;");
            }
            function guardar() {
                var nom1 = document.getElementById('nombre').value.toLowerCase();
                var nom = nom1.split(' ');
                var nomg = nom[0].charAt(0).toUpperCase() + nom[0].slice(1) + nom[nom.length - 1].charAt(0).toUpperCase() + nom[nom.length - 1].slice(1);
                //console.log(nomg + "2017");
                var cont = nomg + "2017";
                var contrasena = hex_md5(cont);
                if (document.getElementById('catastro').className === 'btn btn-primary') {
                    var catastro = 'false';
                } else {
                    var catastro = 'true';
                }
                if (document.getElementById('catastroConsul').className === 'btn btn-success') {
                    var catastroConsul = 'false';
                } else {
                    var catastroConsul = 'true';
                }
                if (document.getElementById('sui').className === 'btn btn-warning') {
                    var sui = 'false';
                } else {
                    var sui = 'true';
                }
                if (document.getElementById('pot').className === 'btn btn-danger') {
                    var pot = 'false';
                } else {
                    var pot = 'true';
                }
                if (document.getElementById('planeacion').className === 'btn btn-primary') {
                    var planeacion = 'false';
                } else {
                    var planeacion = 'true';
                }
                if (document.getElementById('hacienda').className === 'btn btn-primary') {
                    var hacienda = 'false';
                } else {
                    var hacienda = 'true';
                }
                if (document.getElementById('sistemas').className === 'btn btn-warning') {
                    var sistemas = 'false';
                } else {
                    var sistemas = 'true';
                }
                if (document.getElementById('gestor').className === 'btn btn-danger') {
                    var gestor = 'false';
                } else {
                    var gestor = 'true';
                }
                if (document.getElementById('planeacionConsul').className === 'btn btn-success') {
                    var planeacionConsul = 'false';
                } else {
                    var planeacionConsul = 'true';
                }
                if (document.getElementById('haciendaConsul').className === 'btn btn-success') {
                    var haciendaConsul = 'false';
                } else {
                    var haciendaConsul = 'true';
                }
                /*console.log("catastro"+catastro);
                 console.log("catastroConsul"+catastroConsul);
                 console.log("hacienda"+hacienda);
                 console.log("haciendaadm"+haciendaadm);
                 console.log("planeacion"+planeacion);
                 console.log("planeacionadm"+planeacionadm);
                 console.log("tecnologia"+tecnologia);
                 console.log("gestor"+gestor);
                 console.log(document.getElementById('inlineRadio1').checked);*/
                //var arrayResult = update_query("INSERT INTO usuario (nombre,cargo,email,usuario,contrasena,catastrom,catastroc,sui,pot,planeacionm,haciendam,sistemas,gestor,planeacionc,haciendac,estado,dependenci,fechaexp) VALUES('" + document.getElementById('nombre').value + "','" + document.getElementById('cargo').value + "','" + document.getElementById('email').value + "','" + nomg + "','" + contrasena + "','" + catastro + "','" + catastroConsul + "','" + sui + "','" + pot + "','" + planeacion + "','" + hacienda + "','" + sistemas + "','" + gestor + "','" + planeacionConsul + "','" + haciendaConsul + "','t','" + document.getElementById('dependencia').value + "','" + document.getElementById('fecha').value + "');");
                var arrayResult = '<Transaction xmlns="http://www.opengis.net/wfs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:user="user" xmlns:gml="http://www.opengis.net/gml" version="1.1.0" service="WFS" xsi:schemaLocation="http://35.184.3.4:8080/geoserver">\
                    <Insert xmlns="http://www.opengis.net/wfs">\
                        <user:usuario>\
                            <usuario>' + nomg + '</usuario>\
                            <nombre>' + document.getElementById('nombre').value + '</nombre>\
                            <cargo>' + document.getElementById('cargo').value + '</cargo>\
                            <email>' + document.getElementById('email').value + '</email>\
                            <contrasena>' + contrasena + '</contrasena>\
                            <catastrom>' + catastro + '</catastrom>\
                            <catastroc>' + catastroConsul + '</catastroc>\
                            <sui>' + sui + '</sui>\
                            <pot>' + pot + '</pot>\
                            <planeacionm>' + planeacion + '</planeacionm>\
                            <haciendam>' + hacienda + '</haciendam>\
                            <sistemas>' + sistemas + '</sistemas>\
                            <gestor>' + gestor + '</gestor>\
                            <estado>true</estado>\
                            <dependenci>' + document.getElementById('dependencia').value + '</dependenci>\
                            <fechaexp>' + document.getElementById('fecha').value + '</fechaexp>\
                            <planeacionc>' + planeacionConsul + '</planeacionc>\
                            <haciendac>' + haciendaConsul + '</haciendac>\
                        </user:usuario>\
                    </Insert>\
                </Transaction>';

                /*var arrayResult = '<Transaction xmlns="http://www.opengis.net/wfs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:user="user" xmlns:gml="http://www.opengis.net/gml" version="1.1.0" service="WFS" xsi:schemaLocation="http://35.184.3.4:8080/geoserver">\
                    <Insert xmlns="http://www.opengis.net/wfs">\
                        <user:usuario fid="usuario.popr">\
                            <usuario>popeye</usuario>\
                            <nombre>popeye</nombre>\
                            <cargo>1010</cargo>\
                            <email>admin@admin.com</email>\
                            <contrasena>c4ca4238a0b923820dcc509a6f75849b</contrasena>\
                            <catastrom>true</catastrom>\
                            <catastroc>true</catastroc>\
                            <sui>true</sui>\
                            <pot>true</pot>\
                            <planeacionm>true</planeacionm>\
                            <haciendam>true</haciendam>\
                            <sistemas>true</sistemas>\
                            <gestor>false</gestor>\
                            <estado>true</estado>\
                            <dependenci>gestor(AAA)</dependenci>\
                            <fechaexp>2017-10-10</fechaexp>\
                            <planeacionc>false</planeacionc>\
                            <haciendac>false</haciendac>\
                        </user:usuario>\
                    </Insert>\
                </Transaction>';*/

                console.log(arrayResult);
                rooturl = 'http://35.184.3.4:8080/geoserver/user/ows?';
                $.ajax({
                    type: "POST",
                    url: rooturl,
                    dataType: "xml",
                    contentType: "text/xml",
                    async: false,
                    data: arrayResult,
                    success: function (xml) {
                        console.log(xml);
                        //alert('success');
                    },
                    error: function (xml) {
                        console.log('error');
                    }
                });
                /*if (arrayResult) {
                 var urls = "./mail/envio_mail.php";
                 var req = new ajaxRequest();
                 var url = urls + "?c=" + document.getElementById('email').value + "&u=" + nomg + "&p=" + cont;
                 //console.log(url);
                 req.open("GET", url, false);
                 req.send();
                 } else {
                 alert("El usuario ya existe");
                 }*/
            }

            /*function usuario() {
             var elemento = document.getElementById('usu');
             var posicion = elemento.getBoundingClientRect();
             try {
             var eliminar = document.getElementById('autocompletar');
             eliminar.parentNode.removeChild(eliminar);
             } catch (error) {
             }
             var select = select_query("SELECT usuario FROM usuario WHERE usuario LIKE '" + document.getElementById("usu").value + "%';");
             //console.log(select);
             //if (select.length > 5) {
             var iDiv = document.createElement('div');
             iDiv.id = 'autocompletar';
             iDiv.style = "overflow:auto;top:" + posicion.bottom + "px;left:" + posicion.left + "px;width:" + posicion.width + "px; height:200px;position:absolute; border:1px solid #ebebeb";
             //console.log(document.getElementById('autocompletar'));
             //var html = '';
             //ahora creamos el contenido que va dentro del div sera un ul con la respuesta
             //html += '<ul id="lista">';
             var ul = document.createElement('ul');
             ul.id = 'lista';
             //ul.className="list-group";
             ul.classList.add('list-group');
             select.forEach(function (entry) {
             //console.log(entry[0]);
             var li = document.createElement("li");
             //li.value=entry[0];
             //li.data-codigo=entry[0];
             //li.innerHTML=entry[0]==''?'(nada)':entry[0];
             //var li= '<li data-codigo="' + entry[0] + '"><a href="javascript:;">' + entry[0] + '</a></li>';
             var a = document.createElement("a");
             a.id = "a" + entry[0];
             a.href = "#";
             //a.onclick="auto();return false;";
             a.addEventListener("click", function () {
             auto(a.id);
             }, false);
             a.classList.add('list-group-item');
             a.classList.add('list-group-item-action');
             a.classList.add('list-group-item-success');
             a.value = entry[0];
             a.innerHTML = entry[0];
             li.appendChild(a);
             ul.appendChild(li);
             });
             //console.log(ul);
             iDiv.appendChild(ul);
             //console.log(iDiv);
             document.body.appendChild(iDiv);
             }*/
            function auto(id) {

                //document.getElementById('e_nombre1').value = select["0"]["0"];
                //document.getElementById('e_nombre1').value = select["0"]["0"];
            }
        </script>
        <script src="src/jquery/jquery.min.js"></script>
        <script src="src/bootstrap/js/bootstrap.js"></script>
        <script src="js/index.js"></script>
        <script src="js/md5.inc.js"></script>
    </body>
</html>